---
title: 'Save Integration'
openapi: 'POST /api/v1/integrations/save'
---

## Overview

Save or update integrations with external services to pull additional context into your codebase analysis.

## Use Cases

- Connect error monitoring systems for better debugging
- Link issue trackers to correlate code changes
- Integrate documentation platforms for reference
- Set up automated workflows across tools
- Enable cross-platform analysis

## Authentication

This endpoint requires API key authentication via the `x-api-key` header.

```bash
x-api-key: YOUR_API_KEY
```

<AccordionGroup>
  <Accordion title="Request & Response">

| Location | Field | Type | Required | Default | Description |
|----------|-------|------|----------|---------|-------------|
| Body | `name` | string | required | - | User-friendly name for this integration (e.g., "Production Sentry") |
| Body | `integration_type` | string | required | - | Type: `sentry`, `jira`, `linear`, `confluence`, `slack`, `github` |
| Body | `status` | string | optional | `active` | Status: `active`, `inactive`, `pending`, `error` |
| Body | `active` | boolean | optional | `true` | Whether the integration is currently active |
| Body | `auth_data` | object | optional | - | Authentication credentials (access_token, refresh_token, etc.) |
| Body | `scope_data` | object | optional | - | Scope configuration (org_slug, workspace_id, etc.) |
| Body | `metadata` | object | optional | - | Additional metadata (description, tags, etc.) |
| Body | `unique_identifier` | string | optional | auto-generated | Custom unique identifier |
| Response | `success` | boolean | - | - | Whether the integration was saved successfully |
| Response | `data` | object | - | - | The saved integration details including generated IDs |
| Response | `error` | string | - | - | Error message if the operation failed (null on success) |

<Note>
**Response Format:** This endpoint returns a structured response with `success`, `data`, and `error` fields rather than standard HTTP error codes.

**Updating Integrations:** Use the same `unique_identifier` to update an existing integration instead of creating a new one.
</Note>

  </Accordion>
</AccordionGroup>

## Complete Workflow

<CodeGroup>

```typescript TypeScript
const response = await fetch(
  'https://production-api.potpie.ai/api/v1/integrations/save',
  {
    method: 'POST',
    headers: {
      'x-api-key': process.env.POTPIE_API_KEY,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      name: 'Production Sentry',
      integration_type: 'sentry',
      status: 'active',
      auth_data: {
        access_token: 'sentry_access_token_here',
        token_type: 'Bearer'
      },
      scope_data: {
        org_slug: 'my-company'
      },
      metadata: {
        instance_name: 'Production Sentry',
        created_via: 'api',
        description: 'Error monitoring for production',
        tags: ['production', 'monitoring']
      }
    })
  }
);

const result = await response.json();
if (result.success) {
  console.log('Integration saved:', result.data);
} else {
  console.error('Failed:', result.error);
}
```

```python Python
import requests
import os

response = requests.post(
    'https://production-api.potpie.ai/api/v1/integrations/save',
    headers={
        'x-api-key': os.environ['POTPIE_API_KEY'],
        'Content-Type': 'application/json'
    },
    json={
        'name': 'Main Jira Board',
        'integration_type': 'jira',
        'status': 'active',
        'auth_data': {
            'access_token': 'jira_access_token',
            'refresh_token': 'jira_refresh_token',
            'token_type': 'Bearer'
        },
        'scope_data': {
            'org_slug': 'mycompany',
            'project_id': 'PROJ'
        },
        'metadata': {
            'instance_name': 'Main Jira',
            'created_via': 'api',
            'tags': ['issue-tracking']
        }
    }
)

result = response.json()
if result['success']:
    print(f"Integration saved: {result['data']['integration_id']}")
else:
    print(f"Error: {result['error']}")
```

```bash cURL
curl -X POST \
  'https://production-api.potpie.ai/api/v1/integrations/save' \
  -H 'x-api-key: YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "Development Linear",
    "integration_type": "linear",
    "status": "active",
    "auth_data": {
      "access_token": "lin_api_key_here"
    },
    "scope_data": {
      "workspace_id": "workspace_123"
    },
    "metadata": {
      "instance_name": "Dev Team Linear",
      "created_via": "api",
      "description": "Linear workspace for dev team",
      "tags": ["development", "issues"]
    }
  }'
```

</CodeGroup>

## Integration Configuration

<Card>

<Tabs>
  <Tab title="Sentry">
    **Required Fields:**
    - `integration_type`: `"sentry"`
    - `name`: Your integration name
    - `auth_data.access_token`: Sentry API token

    **Optional Configuration:**
    ```json
    {
      "scope_data": {
        "org_slug": "your-organization"
      }
    }
    ```

    **Example:**
    ```typescript
    {
      name: 'Production Sentry',
      integration_type: 'sentry',
      auth_data: {
        access_token: 'your_sentry_token'
      },
      scope_data: {
        org_slug: 'my-company'
      }
    }
    ```
  </Tab>

  <Tab title="Jira">
    **Required Fields:**
    - `integration_type`: `"jira"`
    - `name`: Your integration name
    - `auth_data.access_token`: Jira API token

    **Optional Configuration:**
    ```json
    {
      "scope_data": {
        "org_slug": "your-company",
        "project_id": "PROJ"
      }
    }
    ```

    **Example:**
    ```typescript
    {
      name: 'Main Jira Board',
      integration_type: 'jira',
      auth_data: {
        access_token: 'your_jira_token',
        refresh_token: 'your_refresh_token'
      },
      scope_data: {
        org_slug: 'mycompany',
        project_id: 'PROJ'
      }
    }
    ```
  </Tab>

  <Tab title="Linear">
    **Required Fields:**
    - `integration_type`: `"linear"`
    - `name`: Your integration name
    - `auth_data.access_token`: Linear API key

    **Optional Configuration:**
    ```json
    {
      "scope_data": {
        "workspace_id": "workspace_id_here"
      }
    }
    ```

    **Example:**
    ```typescript
    {
      name: 'Development Linear',
      integration_type: 'linear',
      auth_data: {
        access_token: 'your_linear_key'
      },
      scope_data: {
        workspace_id: 'workspace_123'
      }
    }
    ```
  </Tab>

  <Tab title="Confluence">
    **Required Fields:**
    - `integration_type`: `"confluence"`
    - `name`: Your integration name
    - `auth_data.access_token`: Confluence API token

    **Optional Configuration:**
    ```json
    {
      "scope_data": {
        "org_slug": "your-company"
      }
    }
    ```

    **Example:**
    ```typescript
    {
      name: 'Company Wiki',
      integration_type: 'confluence',
      auth_data: {
        access_token: 'your_confluence_token'
      },
      scope_data: {
        org_slug: 'mycompany'
      }
    }
    ```
  </Tab>

  <Tab title="Slack">
    **Required Fields:**
    - `integration_type`: `"slack"`
    - `name`: Your integration name
    - `auth_data.access_token`: Slack bot token

    **Example:**
    ```typescript
    {
      name: 'Engineering Slack',
      integration_type: 'slack',
      auth_data: {
        access_token: 'xoxb-your-bot-token'
      }
    }
    ```
  </Tab>

  <Tab title="Minimal">
    **Minimum Required Fields:**

    You can provide just the essentials and let Potpie fill in defaults:

    ```typescript
    {
      name: 'My Integration',
      integration_type: 'sentry'
      // All other fields optional with sensible defaults
    }
    ```

    **Response on Success:**
    ```json
    {
      "success": true,
      "data": {
        "integration_id": "int_abc123",
        "name": "My Integration",
        "integration_type": "sentry",
        "status": "active",
        "created_at": "2026-02-16T10:30:00Z"
      },
      "error": null
    }
    ```

    **Response on Failure:**
    ```json
    {
      "success": false,
      "data": null,
      "error": "Integration with this name already exists"
    }
    ```
  </Tab>
</Tabs>

</Card>

## Error Responses

<AccordionGroup>
  <Accordion title="401 Unauthorized">

The endpoint requires a valid API key for authentication.

```json
{
  "detail": "API key is required"
}
```

**Causes:**
- Missing `x-api-key` header
- Invalid or expired API key

**Solution:** Include a valid API key in the request header.
  </Accordion>

  <Accordion title="500 Internal Server Error">

The endpoint catches all exceptions and returns them in a structured format.

```json
{
  "success": false,
  "data": null,
  "error": "Database connection failed"
}
```

**Common Errors:**
- Database connection failures
- Invalid integration type
- Duplicate unique identifier
- Authentication data validation errors

**Solution:** Check the `error` field in the response for specific error details. Verify all required fields are provided and valid.
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="success: false in response">
    **Problem:** Response shows `success: false` with an error message.

    **Solution:**
    - Read the `error` field for specific error details
    - Common issues:
      - Duplicate unique identifier
      - Invalid integration type
      - Missing required fields in nested objects
      - Database connection issues
    - Verify all required fields are provided
    - Check that nested objects (auth_data, scope_data, metadata) are properly formatted
  </Accordion>

  <Accordion title="Duplicate integration">
    **Problem:** Error indicates integration already exists.

    **Solution:**
    - Use a different `unique_identifier`
    - Or update the existing integration by providing the same `unique_identifier`
    - Check existing integrations before creating new ones
    - Use descriptive unique identifiers to avoid conflicts
  </Accordion>

  <Accordion title="Invalid integration_type">
    **Problem:** Integration type not recognized.

    **Solution:**
    - Use one of the supported types: `sentry`, `jira`, `linear`, `confluence`, `slack`, `github`
    - Check for typos in the integration type
    - Ensure the integration type is lowercase
    - Refer to the Supported Integration Types section
  </Accordion>

  <Accordion title="Authentication data validation failed">
    **Problem:** Error related to auth_data validation.

    **Solution:**
    - Ensure auth_data object is properly formatted
    - Provide at least one of: access_token, refresh_token, or code
    - Verify token_type is valid (e.g., "Bearer")
    - Check that expires_at is a valid ISO 8601 datetime if provided
    - Ensure all tokens are properly encrypted/encoded
  </Accordion>

  <Accordion title="Integration not appearing">
    **Problem:** Integration saved successfully but not visible.

    **Solution:**
    - Check that `active` field is set to `true`
    - Verify `status` is set to "active"
    - Ensure the integration is associated with your user account
    - Try refreshing your integration list
    - Check if there are any filters applied
  </Accordion>
</AccordionGroup>
