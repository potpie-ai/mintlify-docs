---
title: 'Integrations API'
description: 'Connect Potpie with third-party services'
---

## Overview

The Integrations API allows you to connect Potpie with external services to enhance your development workflow. Supported integrations include:

- **Sentry**: Error tracking and monitoring
- **GitHub**: Source code management
- **Slack**: Team communication
- **Jira**: Issue tracking
- **Linear**: Project management
- **Confluence**: Documentation

## Save Integration

Create or update an integration configuration.

<CodeGroup>

```bash cURL
curl -X POST https://api.potpie.ai/api/v2/integrations/save \
  -H "x-api-key: YOUR_API_KEY" \
  -H "x-user-id: YOUR_USER_ID" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Production Sentry",
    "integration_type": "sentry",
    "status": "active",
    "active": true,
    "metadata": {
      "instance_name": "Production Sentry",
      "created_via": "api"
    }
  }'
```

```python Python
import requests

def save_integration(
    name: str,
    integration_type: str,
    api_key: str,
    user_id: str,
    auth_data: dict = None,
    scope_data: dict = None,
    metadata: dict = None
):
    """Save a new integration"""
    url = "https://api.potpie.ai/api/v2/integrations/save"

    headers = {
        "x-api-key": api_key,
        "x-user-id": user_id,
        "Content-Type": "application/json"
    }

    payload = {
        "name": name,
        "integration_type": integration_type,
        "status": "active",
        "active": True
    }

    if auth_data:
        payload["auth_data"] = auth_data

    if scope_data:
        payload["scope_data"] = scope_data

    if metadata:
        payload["metadata"] = metadata
    else:
        payload["metadata"] = {
            "instance_name": name,
            "created_via": "api"
        }

    response = requests.post(url, json=payload, headers=headers)
    return response.json()

# Usage - Basic integration
result = save_integration(
    "Production Sentry",
    "sentry",
    "YOUR_API_KEY",
    "YOUR_USER_ID"
)

print(f"Integration created: {result['data']['integration_id']}")
```

```typescript TypeScript
interface IntegrationSaveRequest {
  name: string;
  integration_type: 'sentry' | 'github' | 'slack' | 'jira' | 'linear' | 'confluence';
  status?: 'active' | 'inactive' | 'pending' | 'error';
  active?: boolean;
  auth_data?: AuthData;
  scope_data?: ScopeData;
  metadata?: IntegrationMetadata;
  unique_identifier?: string;
}

interface AuthData {
  access_token?: string;
  refresh_token?: string;
  token_type?: string;
  expires_at?: string;
  scope?: string;
  code?: string;
}

interface ScopeData {
  org_slug?: string;
  installation_id?: string;
  workspace_id?: string;
  project_id?: string;
}

interface IntegrationMetadata {
  instance_name: string;
  created_via?: string;
  version?: string;
  description?: string;
  tags?: string[];
}

interface IntegrationSaveResponse {
  success: boolean;
  data?: any;
  error?: string;
}

async function saveIntegration(
  request: IntegrationSaveRequest,
  apiKey: string,
  userId: string
): Promise<IntegrationSaveResponse> {
  const response = await fetch(
    'https://api.potpie.ai/api/v2/integrations/save',
    {
      method: 'POST',
      headers: {
        'x-api-key': apiKey,
        'x-user-id': userId,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(request)
    }
  );

  return response.json();
}

// Usage
const result = await saveIntegration(
  {
    name: 'Production Sentry',
    integration_type: 'sentry',
    metadata: {
      instance_name: 'Production Sentry',
      created_via: 'api'
    }
  },
  'YOUR_API_KEY',
  'YOUR_USER_ID'
);
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "net/http"
)

type IntegrationSaveRequest struct {
    Name            string              `json:"name"`
    IntegrationType string              `json:"integration_type"`
    Status          string              `json:"status,omitempty"`
    Active          bool                `json:"active"`
    AuthData        *AuthData           `json:"auth_data,omitempty"`
    ScopeData       *ScopeData          `json:"scope_data,omitempty"`
    Metadata        *IntegrationMetadata `json:"metadata,omitempty"`
}

type AuthData struct {
    AccessToken  *string `json:"access_token,omitempty"`
    RefreshToken *string `json:"refresh_token,omitempty"`
    TokenType    string  `json:"token_type,omitempty"`
    ExpiresAt    *string `json:"expires_at,omitempty"`
    Scope        *string `json:"scope,omitempty"`
}

type ScopeData struct {
    OrgSlug        *string `json:"org_slug,omitempty"`
    InstallationID *string `json:"installation_id,omitempty"`
    WorkspaceID    *string `json:"workspace_id,omitempty"`
    ProjectID      *string `json:"project_id,omitempty"`
}

type IntegrationMetadata struct {
    InstanceName string   `json:"instance_name"`
    CreatedVia   string   `json:"created_via,omitempty"`
    Description  *string  `json:"description,omitempty"`
    Tags         []string `json:"tags,omitempty"`
}

type IntegrationSaveResponse struct {
    Success bool        `json:"success"`
    Data    interface{} `json:"data,omitempty"`
    Error   *string     `json:"error,omitempty"`
}

func saveIntegration(req IntegrationSaveRequest, apiKey, userID string) (*IntegrationSaveResponse, error) {
    jsonData, _ := json.Marshal(req)

    httpReq, _ := http.NewRequest(
        "POST",
        "https://api.potpie.ai/api/v2/integrations/save",
        bytes.NewBuffer(jsonData),
    )
    httpReq.Header.Add("x-api-key", apiKey)
    httpReq.Header.Add("x-user-id", userID)
    httpReq.Header.Add("Content-Type", "application/json")

    client := &http.Client{}
    resp, err := client.Do(httpReq)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()

    var result IntegrationSaveResponse
    json.NewDecoder(resp.Body).Decode(&result)

    return &result, nil
}
```

</CodeGroup>

### Request Body

<ParamField body="name" type="string" required>
  Integration name (1-255 characters)

  Example: "Production Sentry", "GitHub Enterprise"
</ParamField>

<ParamField body="integration_type" type="string" required>
  Type of integration

  Options: `sentry`, `github`, `slack`, `jira`, `linear`, `confluence`
</ParamField>

<ParamField body="status" type="string" default="active">
  Integration status

  Options: `active`, `inactive`, `pending`, `error`
</ParamField>

<ParamField body="active" type="boolean" default="true">
  Whether the integration is active
</ParamField>

<ParamField body="auth_data" type="object">
  Authentication data (optional)

  <Expandable title="Properties">
    <ParamField body="access_token" type="string">
      OAuth access token
    </ParamField>

    <ParamField body="refresh_token" type="string">
      OAuth refresh token
    </ParamField>

    <ParamField body="token_type" type="string" default="Bearer">
      Token type
    </ParamField>

    <ParamField body="expires_at" type="string">
      Token expiration time (ISO 8601)
    </ParamField>

    <ParamField body="scope" type="string">
      OAuth scope
    </ParamField>

    <ParamField body="code" type="string">
      OAuth authorization code
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="scope_data" type="object">
  Scope-specific data (optional)

  <Expandable title="Properties">
    <ParamField body="org_slug" type="string">
      Organization slug
    </ParamField>

    <ParamField body="installation_id" type="string">
      Installation ID
    </ParamField>

    <ParamField body="workspace_id" type="string">
      Workspace ID
    </ParamField>

    <ParamField body="project_id" type="string">
      Project ID (different from Potpie project)
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="metadata" type="object">
  Integration metadata

  <Expandable title="Properties">
    <ParamField body="instance_name" type="string" required>
      User-defined name for this integration instance
    </ParamField>

    <ParamField body="created_via" type="string" default="manual">
      How the integration was created

      Examples: `api`, `oauth_callback`, `web_ui`
    </ParamField>

    <ParamField body="version" type="string">
      Integration version
    </ParamField>

    <ParamField body="description" type="string">
      Integration description
    </ParamField>

    <ParamField body="tags" type="array">
      Integration tags
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="unique_identifier" type="string">
  Unique identifier (auto-generated if not provided)
</ParamField>

### Response

```json
{
  "success": true,
  "data": {
    "integration_id": "int_01HQXYZ789ABCDEF",
    "name": "Production Sentry",
    "integration_type": "sentry",
    "status": "active",
    "active": true,
    "unique_identifier": "sentry_prod_123",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
  },
  "error": null
}
```

<ResponseField name="success" type="boolean">
  Whether the operation was successful
</ResponseField>

<ResponseField name="data" type="object" nullable>
  Integration data if successful
</ResponseField>

<ResponseField name="error" type="string" nullable>
  Error message if operation failed
</ResponseField>

## Integration Types

### Sentry

Error tracking and monitoring integration.

<CodeGroup>

```python Python
def save_sentry_integration(
    api_key: str,
    user_id: str,
    sentry_token: str,
    org_slug: str,
    instance_name: str = "Sentry"
):
    """Save Sentry integration with OAuth token"""
    return save_integration(
        name=instance_name,
        integration_type="sentry",
        api_key=api_key,
        user_id=user_id,
        auth_data={
            "access_token": sentry_token,
            "token_type": "Bearer"
        },
        scope_data={
            "org_slug": org_slug
        },
        metadata={
            "instance_name": instance_name,
            "created_via": "api",
            "description": "Sentry error tracking integration"
        }
    )

# Usage
result = save_sentry_integration(
    "YOUR_API_KEY",
    "YOUR_USER_ID",
    "sentry_oauth_token_here",
    "my-company"
)
```

</CodeGroup>

**Use Cases:**
- Track errors in production
- Monitor application health
- Alert on critical issues
- Analyze error trends

### GitHub

Source code management integration.

<CodeGroup>

```python Python
def save_github_integration(
    api_key: str,
    user_id: str,
    github_token: str,
    org_slug: str = None,
    instance_name: str = "GitHub"
):
    """Save GitHub integration"""
    scope_data = {}
    if org_slug:
        scope_data["org_slug"] = org_slug

    return save_integration(
        name=instance_name,
        integration_type="github",
        api_key=api_key,
        user_id=user_id,
        auth_data={
            "access_token": github_token,
            "token_type": "Bearer",
            "scope": "repo,read:org"
        },
        scope_data=scope_data,
        metadata={
            "instance_name": instance_name,
            "created_via": "api"
        }
    )

# Usage
result = save_github_integration(
    "YOUR_API_KEY",
    "YOUR_USER_ID",
    "ghp_xxxxxxxxxxxx",
    "my-organization"
)
```

</CodeGroup>

**Use Cases:**
- Sync repository access
- Track code changes
- Monitor pull requests
- Automate workflows

### Linear

Project management integration.

<CodeGroup>

```python Python
def save_linear_integration(
    api_key: str,
    user_id: str,
    linear_token: str,
    workspace_id: str = None,
    instance_name: str = "Linear"
):
    """Save Linear integration"""
    scope_data = {}
    if workspace_id:
        scope_data["workspace_id"] = workspace_id

    return save_integration(
        name=instance_name,
        integration_type="linear",
        api_key=api_key,
        user_id=user_id,
        auth_data={
            "access_token": linear_token,
            "token_type": "Bearer"
        },
        scope_data=scope_data,
        metadata={
            "instance_name": instance_name,
            "created_via": "api"
        }
    )
```

</CodeGroup>

**Use Cases:**
- Link code to issues
- Track feature development
- Manage sprints
- Sync project status

### Jira

Issue tracking integration.

<CodeGroup>

```python Python
def save_jira_integration(
    api_key: str,
    user_id: str,
    jira_token: str,
    installation_id: str,
    instance_name: str = "Jira"
):
    """Save Jira integration"""
    return save_integration(
        name=instance_name,
        integration_type="jira",
        api_key=api_key,
        user_id=user_id,
        auth_data={
            "access_token": jira_token,
            "token_type": "Bearer"
        },
        scope_data={
            "installation_id": installation_id
        },
        metadata={
            "instance_name": instance_name,
            "created_via": "api"
        }
    )
```

</CodeGroup>

**Use Cases:**
- Track bugs
- Manage tickets
- Link code to issues
- Automate workflows

### Slack

Team communication integration.

<CodeGroup>

```python Python
def save_slack_integration(
    api_key: str,
    user_id: str,
    slack_token: str,
    workspace_id: str,
    instance_name: str = "Slack"
):
    """Save Slack integration"""
    return save_integration(
        name=instance_name,
        integration_type="slack",
        api_key=api_key,
        user_id=user_id,
        auth_data={
            "access_token": slack_token,
            "token_type": "Bearer"
        },
        scope_data={
            "workspace_id": workspace_id
        },
        metadata={
            "instance_name": instance_name,
            "created_via": "api"
        }
    )
```

</CodeGroup>

**Use Cases:**
- Send notifications
- Share code insights
- Alert on issues
- Collaborate on code

### Confluence

Documentation integration.

<CodeGroup>

```python Python
def save_confluence_integration(
    api_key: str,
    user_id: str,
    confluence_token: str,
    installation_id: str,
    instance_name: str = "Confluence"
):
    """Save Confluence integration"""
    return save_integration(
        name=instance_name,
        integration_type="confluence",
        api_key=api_key,
        user_id=user_id,
        auth_data={
            "access_token": confluence_token,
            "token_type": "Bearer"
        },
        scope_data={
            "installation_id": installation_id
        },
        metadata={
            "instance_name": instance_name,
            "created_via": "api"
        }
    )
```

</CodeGroup>

**Use Cases:**
- Sync documentation
- Update API docs
- Share code examples
- Maintain knowledge base

## Integration Management

### Multiple Integrations

You can have multiple integrations of the same type:

```python
def save_multiple_environments():
    """Save integrations for different environments"""

    # Production Sentry
    save_sentry_integration(
        api_key, user_id,
        prod_token, "prod-org",
        "Production Sentry"
    )

    # Staging Sentry
    save_sentry_integration(
        api_key, user_id,
        staging_token, "staging-org",
        "Staging Sentry"
    )

    # Development Sentry
    save_sentry_integration(
        api_key, user_id,
        dev_token, "dev-org",
        "Development Sentry"
    )
```

### Integration Tags

Organize integrations with tags:

```python
result = save_integration(
    "Production Sentry",
    "sentry",
    api_key,
    user_id,
    metadata={
        "instance_name": "Production Sentry",
        "created_via": "api",
        "tags": ["production", "monitoring", "critical"]
    }
)
```

### Update Integration

To update an integration, save it again with the same `unique_identifier`:

```python
# Initial save
result1 = save_integration(
    "My Sentry",
    "sentry",
    api_key,
    user_id,
    metadata={"instance_name": "My Sentry"}
)

integration_id = result1['data']['unique_identifier']

# Update
result2 = save_integration(
    "Updated Sentry Name",
    "sentry",
    api_key,
    user_id,
    metadata={"instance_name": "Updated Sentry Name"},
    unique_identifier=integration_id
)
```

## Error Handling

<CodeGroup>

```python Python
def save_integration_with_retry(
    name: str,
    integration_type: str,
    api_key: str,
    user_id: str,
    max_retries: int = 3
):
    """Save integration with retry logic"""
    import time

    for attempt in range(max_retries):
        try:
            result = save_integration(
                name, integration_type,
                api_key, user_id
            )

            if result['success']:
                return result
            else:
                print(f"Failed: {result['error']}")
                if attempt < max_retries - 1:
                    time.sleep(2 ** attempt)  # Exponential backoff

        except Exception as e:
            print(f"Error: {e}")
            if attempt < max_retries - 1:
                time.sleep(2 ** attempt)

    raise Exception("Failed to save integration after retries")

# Usage
result = save_integration_with_retry(
    "Production Sentry",
    "sentry",
    "YOUR_API_KEY",
    "YOUR_USER_ID"
)
```

</CodeGroup>

### Common Errors

<AccordionGroup>
  <Accordion title="400 Bad Request">
    **Cause:** Invalid request parameters

    **Solutions:**
    - Verify integration_type is valid
    - Check name length (1-255 characters)
    - Ensure required metadata is provided
  </Accordion>

  <Accordion title="401 Unauthorized">
    **Cause:** Invalid API credentials

    **Solutions:**
    - Verify API key is correct
    - Check user ID is valid
    - Ensure credentials haven't expired
  </Accordion>

  <Accordion title="500 Internal Server Error">
    **Cause:** Server-side error

    **Solutions:**
    - Retry with exponential backoff
    - Check if integration service is available
    - Contact support if persists
  </Accordion>
</AccordionGroup>

## Best Practices

<CardGroup cols={2}>
  <Card title="Descriptive Names" icon="tag">
    Use clear, descriptive names for integrations (e.g., "Production Sentry", not "Sentry1")
  </Card>

  <Card title="Environment Separation" icon="split">
    Create separate integrations for different environments
  </Card>

  <Card title="Token Security" icon="lock">
    Never expose access tokens in logs or error messages
  </Card>

  <Card title="Use Tags" icon="tags">
    Organize integrations with tags for easy filtering
  </Card>
</CardGroup>

## Integration Workflows

### CI/CD Integration

```python
def setup_cicd_integrations(api_key: str, user_id: str):
    """Set up integrations for CI/CD pipeline"""

    # GitHub for source control
    github_result = save_github_integration(
        api_key, user_id,
        github_token=os.environ['GITHUB_TOKEN'],
        org_slug="my-company",
        instance_name="CI/CD GitHub"
    )

    # Sentry for error tracking
    sentry_result = save_sentry_integration(
        api_key, user_id,
        sentry_token=os.environ['SENTRY_TOKEN'],
        org_slug="my-company",
        instance_name="CI/CD Sentry"
    )

    # Slack for notifications
    slack_result = save_slack_integration(
        api_key, user_id,
        slack_token=os.environ['SLACK_TOKEN'],
        workspace_id="TXXXXXXXX",
        instance_name="CI/CD Slack"
    )

    return {
        "github": github_result['success'],
        "sentry": sentry_result['success'],
        "slack": slack_result['success']
    }
```

### Team Onboarding

```python
def setup_new_team_member(
    api_key: str,
    user_id: str,
    team_integrations: dict
):
    """Set up standard integrations for new team member"""

    results = {}

    for integration_type, config in team_integrations.items():
        try:
            result = save_integration(
                name=config['name'],
                integration_type=integration_type,
                api_key=api_key,
                user_id=user_id,
                auth_data=config.get('auth_data'),
                scope_data=config.get('scope_data'),
                metadata=config.get('metadata', {
                    'instance_name': config['name'],
                    'created_via': 'onboarding'
                })
            )
            results[integration_type] = result['success']
        except Exception as e:
            results[integration_type] = False
            print(f"Failed to set up {integration_type}: {e}")

    return results
```

## Security Considerations

<Warning>
Integration tokens grant access to external services. Handle them securely:

1. Store tokens in secure vaults (not in code)
2. Use environment variables for tokens
3. Implement token rotation
4. Monitor integration access logs
5. Revoke tokens when no longer needed
</Warning>

### Token Storage

```python
import os
from typing import Optional

def get_integration_token(integration_type: str) -> Optional[str]:
    """Securely retrieve integration token from environment"""
    token_key = f"{integration_type.upper()}_TOKEN"
    return os.environ.get(token_key)

# Usage
sentry_token = get_integration_token('sentry')
if sentry_token:
    save_sentry_integration(api_key, user_id, sentry_token, org_slug)
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Integration not working">
    Check:
    - Token is valid and not expired
    - Scope/permissions are correct
    - Organization/workspace ID is accurate
    - Integration is marked as 'active'
  </Accordion>

  <Accordion title="Cannot save integration">
    Verify:
    - API key and user ID are correct
    - Request body follows schema
    - Integration type is supported
    - Name is within length limits
  </Accordion>

  <Accordion title="OAuth token expired">
    Solution:
    - Implement token refresh logic
    - Update integration with new token
    - Set up expiration monitoring
  </Accordion>
</AccordionGroup>
