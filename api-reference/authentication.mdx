---
title: 'Authentication'
description: 'Learn how to authenticate API requests to Potpie'
---

## Overview

Potpie API supports two authentication methods depending on your use case:

1. **Bearer Token Authentication** (Firebase JWT) - For web UI and user sessions
2. **API Key Authentication** - For programmatic access and integrations

## Bearer Token Authentication

Used for endpoints under `/api/v1/` that require user context.

### Getting a Firebase JWT Token

Firebase JWT tokens are obtained through the Firebase Authentication SDK during user login:

```javascript
import { getAuth, signInWithEmailAndPassword } from 'firebase/auth';

const auth = getAuth();
const userCredential = await signInWithEmailAndPassword(auth, email, password);
const token = await userCredential.user.getIdToken();
```

### Using the Token

Include the token in the `Authorization` header:

```bash
curl -X GET https://api.potpie.ai/api/v1/projects/list \
  -H "Authorization: Bearer YOUR_FIREBASE_JWT_TOKEN"
```

### Token Expiration

Firebase JWT tokens expire after 1 hour. Your client should handle token refresh automatically:

```javascript
// Token auto-refresh
auth.currentUser.getIdToken(true).then(token => {
  // Use refreshed token
});
```

## API Key Authentication

Used for endpoints under `/api/v2/` for server-to-server communication and CLI tools.

### Generating an API Key

1. Log in to [Potpie Dashboard](https://app.potpie.ai)
2. Navigate to **Settings** â†’ **API Keys**
3. Click **Generate New Key**
4. Copy and securely store your API key (shown only once)

### Using the API Key

Include both `x-api-key` and `x-user-id` headers:

```bash
curl -X GET https://api.potpie.ai/api/v2/projects/list \
  -H "x-api-key: YOUR_API_KEY" \
  -H "x-user-id: YOUR_USER_ID"
```

<CodeGroup>

```python Python
import requests

headers = {
    "x-api-key": "YOUR_API_KEY",
    "x-user-id": "YOUR_USER_ID"
}

response = requests.get(
    "https://api.potpie.ai/api/v2/projects/list",
    headers=headers
)
```

```javascript JavaScript
const response = await fetch('https://api.potpie.ai/api/v2/projects/list', {
  headers: {
    'x-api-key': 'YOUR_API_KEY',
    'x-user-id': 'YOUR_USER_ID'
  }
});
```

```typescript TypeScript
const headers = {
  'x-api-key': 'YOUR_API_KEY',
  'x-user-id': 'YOUR_USER_ID'
};

const response = await fetch('https://api.potpie.ai/api/v2/projects/list', {
  headers
});
```

```go Go
package main

import (
    "net/http"
)

func main() {
    req, _ := http.NewRequest("GET", "https://api.potpie.ai/api/v2/projects/list", nil)
    req.Header.Add("x-api-key", "YOUR_API_KEY")
    req.Header.Add("x-user-id", "YOUR_USER_ID")

    client := &http.Client{}
    resp, _ := client.Do(req)
    // Handle response
}
```

</CodeGroup>

## Security Best Practices

<Warning>
Never expose your API keys in client-side code, public repositories, or version control systems.
</Warning>

### API Key Security

- Store API keys in environment variables or secure vaults
- Rotate keys regularly (recommended: every 90 days)
- Use different keys for different environments (dev, staging, prod)
- Revoke compromised keys immediately

### Token Security

- Never log or store JWT tokens in plain text
- Implement token refresh logic before expiration
- Use HTTPS for all API requests
- Clear tokens on logout

## Rate Limiting

API requests are rate-limited based on your subscription plan:

| Plan | Requests/Minute | Requests/Day |
|------|----------------|--------------|
| Free | 10 | 1,000 |
| Pro | 60 | 10,000 |
| Enterprise | Custom | Custom |

When rate limited, you'll receive a `429 Too Many Requests` response:

```json
{
  "detail": "Rate limit exceeded. Please try again in 60 seconds."
}
```

## Error Responses

### 401 Unauthorized

**Missing Authentication:**
```json
{
  "detail": "Bearer authentication is needed"
}
```

**Invalid Token:**
```json
{
  "detail": "Invalid authentication from Firebase"
}
```

**Missing API Key:**
```json
{
  "detail": "API key is required"
}
```

### 403 Forbidden

```json
{
  "detail": "Access denied to this resource"
}
```

## Development Mode

For local development, you can enable development mode to bypass authentication:

```bash
# .env file
isDevelopmentMode=enabled
defaultUsername=dev_user_id
```

<Warning>
Development mode should NEVER be enabled in production environments.
</Warning>

## Getting Help

If you're having authentication issues:

1. Check that your API key is valid and not expired
2. Verify your user ID is correct
3. Ensure headers are properly formatted
4. Check for rate limiting
5. Contact [support@potpie.ai](mailto:support@potpie.ai) for assistance
