---
title: "Test your new AgentStack feature with Potpie"
description: "How to use the Unit Test Agent to test a function in the AgentOps-AI/AgentStack codebase"
---

Understanding how to write comprehensive unit tests is crucial for maintaining code quality and reliability. Potpie's Unit Test Agent streamlines this process by providing structured guidance for test planning and implementation. Let's explore how you can use the Unit Test agent to create robust test suites.

**Understanding Potpie's Unit Test Agent Through a Real Example**&#x20;

We ask Potpie's unit test agent to "Help me generate a test plan and test code for @query\_perplexity function in @perplexity\_tool". The agent breaks down the testing process into clear, actionable components.

![](/image.png)
**Comprehensive Test Planning**&#x20;

The Unit Test Agent begins by outlining a structured test plan that covers:

1. API Integration Testing

   * Validates proper interaction with the Perplexity API

   * Ensures correct handling of API responses

   * Verifies authentication and API key management

2. Core Functionality Testing

   * Tests the function's behavior with valid query inputs

   * Verifies proper response parsing and formatting

   * Confirms error handling mechanisms

3. Input Validation

   * Tests handling of various query string formats

   * Validates empty or invalid input processing

   * Verifies proper parameter validation

4. Error Handling Scenarios

   * Examines behavior with invalid API keys

   * Tests response to network failures

   * Verifies proper error message propagation

**Implementation Guidance**&#x20;
The agent provides detailed implementation guidance using industry best practices:

1. Test Setup

   * Demonstrates proper use of unittest framework

   * Shows how to implement mock API responses

   * Guides the creation of test fixtures for different scenarios

2. Test Case Structure

   * Organizes tests into logical groupings

   * Provides clear naming conventions for test methods

   * Implements assertion patterns for API response validation

**How to use Potpie's Unit Testing agent:**&#x20;

To leverage this tool for your own projects

1. Visit [app.potpie.ai](https://app.potpie.ai/newchat?repo=AgentOps-AI/AgentStack\&branch=main)

2. Click on "Parse" button.

3. Choose the Unit Test Agent option

4. Mention the function or class you want to unit test using the '@' command and generate test plans and test code.

The agent will analyze your code and provide detailed test plan and test code implementation guidance.

You can use the Unit Test Agent when:

* Implementing new features which require test coverage

* Maintaining existing test suites

* Ensuring robust error handling during writing code



Check out the above chat :

"Help me generate a test plan and test code for @query\_perplexity function in @perplexity\_tool" at 
[https://app.potpie.ai/chat/01939a44-f4a9-709f-8257-9debe047b0a7](https://app.potpie.ai/chat/01939a44-f4a9-709f-8257-9debe047b0a7)